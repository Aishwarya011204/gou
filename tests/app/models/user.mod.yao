{
  "FROM": "@infra.erp.models.user", // inherited from workshop.yaoapps.com/infra/erp/models/user.mod.yao
  "RUN": {
    "DELETE": ["columns[1]", "columns[2]"], // remove user_sn, user_no fields
    "REPLACE": [{ "table": "$new.table" }], // replace the fields with the new definition
    "MERGE": [
      {
        // merge mobile field add validations
        "columns.5": {
          "validations": [
            {
              "method": "mobile",
              "args": [],
              "message": "{{input}} should be email"
            }
          ]
        }
      }
    ], // do not deep merge
    "APPEND": [
      {
        "columns": [
          {
            "comment": "Published At",
            "index": true,
            "label": "Published At",
            "name": "published_at",
            "nullable": true,
            "type": "datetime"
          }
        ]
      }
    ] // append the new definition to the fields
  },
  "table": { "name": "user", "comment": "User" },
  "columns": [
    {
      "label": "Phone",
      "name": "phone",
      "type": "string",
      "length": 50,
      "comment": "Phone number",
      "nullable": true,
      "crypt": "AES",
      "validations": [
        {
          "method": "typeof",
          "args": ["string"],
          "message": "{{input}} Error"
        }
      ]
    },
    { "COPY": "@yaoapp.demo-wms.cloud.fields.supplier_id" } // copy the supplier supplier_id from github.com/yaoapp/templates/fields.tpl.yao
  ],
  "indexes": [
    {
      "name": "supplier_id_phone_unique",
      "type": "unique",
      "columns": ["supplier_id", "phone"]
    }
  ]
}
